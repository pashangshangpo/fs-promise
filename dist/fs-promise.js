function n(n){return n&&"object"==typeof n&&"default"in n?n.default:n}var t=n(require("fs")),e=n(require("path"));const r=function(){function n(){}return n.prototype.then=function(t,e){const r=new n,i=this.s;if(i){const n=1&i?t:e;if(n){try{o(r,1,n(this.v))}catch(n){o(r,2,n)}return r}return this}return this.o=function(n){try{const i=n.v;1&n.s?o(r,1,t?t(i):i):e?o(r,1,e(i)):o(r,2,i)}catch(n){o(r,2,n)}},r},n}();function o(n,t,e){if(!n.s){if(e instanceof r){if(!e.s)return void(e.o=o.bind(null,n,t));1&t&&(t=e.s),e=e.v}if(e&&e.then)return void e.then(o.bind(null,n,t),o.bind(null,n,2));n.s=t,n.v=e;const i=n.o;i&&i(n)}}function i(n){return n instanceof r&&1&n.s}const u="undefined"!=typeof Symbol?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function c(n,t,e){if("function"==typeof n[u]){var c,f,s,l=n[u]();if(function n(u){try{for(;!((c=l.next()).done||e&&e());)if((u=t(c.value))&&u.then){if(!i(u))return void u.then(n,s||(s=o.bind(null,f=new r,2)));u=u.v}f?o(f,1,u):f=u}catch(n){o(f||(f=new r),2,n)}}(),l.return){var a=function(n){try{c.done||l.return()}catch(n){}return n};if(f&&f.then)return f.then(a,function(n){throw a(n)});a()}return f}if(!("length"in n))throw new TypeError("Object is not iterable");for(var h=[],m=0;m<n.length;m++)h.push(n[m]);return function(n,t,e){var u,c,f=-1;return function s(l){try{for(;++f<n.length&&(!e||!e());)if((l=t(f))&&l.then){if(!i(l))return void l.then(s,c||(c=o.bind(null,u=new r,2)));l=l.v}u?o(u,1,l):u=l}catch(n){o(u||(u=new r),2,n)}}(),u}(h,function(n){return t(h[n])},e)}"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var f=function(n){return new Promise(function(e){t.access(n,t.constants.F_OK,function(n){e(!n)})})},s=function(n){return new Promise(function(e){t.stat(n,function(n,t){e(!n&&t.isDirectory())})})},l=function(n){return new Promise(function(e){t.readdir(n,function(n,t){e(t||[])})})},a=function(n){try{var e=n.split("/");return e.pop(),Promise.resolve(f(e.join("/"))).then(function(r){function o(){return new Promise(function(e){t.mkdir(n,function(){try{return Promise.resolve(f(n)).then(function(n){e(n)})}catch(n){return Promise.reject(n)}})})}var i=function(){if(!r)return Promise.resolve(a(e.join("/"))).then(function(){})}();return i&&i.then?i.then(o):o()})}catch(n){return Promise.reject(n)}},h=function(n){return new Promise(function(e){t.unlink(n,function(n){e(!n)})})},m=function(n){try{return Promise.resolve(l(n)).then(function(r){function o(){return new Promise(function(e){t.rmdir(n,function(n){e(!n)})})}var i=c(r,function(t){var r=e.join(n,t);return Promise.resolve(s(r)).then(function(n){var t=n?Promise.resolve(m(r)).then(function(){}):Promise.resolve(h(r)).then(function(){});if(t&&t.then)return t.then(function(){})})});return i&&i.then?i.then(o):o()})}catch(n){return Promise.reject(n)}};exports.exists=f,exports.isDir=s,exports.writeFile=function(n,e){try{var r=n.split("/");r.pop();var o=r.join("/");return Promise.resolve(f(o)).then(function(r){function i(){return new Promise(function(r){t.writeFile(n,e,function(n){r(!n)})})}var u=function(){if(!r)return Promise.resolve(a(o)).then(function(){})}();return u&&u.then?u.then(i):i()})}catch(n){return Promise.reject(n)}},exports.writeJson=function(n,e){try{var r=n.split("/");r.pop();var o=r.join("/");return Promise.resolve(f(o)).then(function(r){function i(){return new Promise(function(r){t.writeFile(n,JSON.stringify(e,null,2),function(n){r(!n)})})}var u=function(){if(!r)return Promise.resolve(a(o)).then(function(){})}();return u&&u.then?u.then(i):i()})}catch(n){return Promise.reject(n)}},exports.readdir=l,exports.readFile=function(n){return new Promise(function(e){t.readFile(n,function(n,t){e(n?null:t)})})},exports.readText=function(n){return new Promise(function(e){t.readFile(n,function(n,t){e(n?null:t.toString())})})},exports.readJson=function(n){return new Promise(function(e){t.readFile(n,function(n,t){(t=t.toString()||null)&&(t=JSON.parse(t)),e(n?null:t)})})},exports.mkdir=a,exports.deleteDir=m,exports.deleteFile=h;
